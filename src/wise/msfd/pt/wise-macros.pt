<metal:macro define-macro="tabs">
  <div id="mainform-tabs" tal:define="tab_type view/tabs_type | string:article">

    <ul class="nav nav-pills topnav hidden-xs"
      tal:define="root_url view/root_url | string:.">
      <tal:rep tal:repeat="tab view/main_forms">
        <li
          tal:condition="python: tab.condition(view)"
          tal:define="
          section view/section | nothing;
          active python: section and (view.section == tab.section) or (not section and (tab.path in request.URL0));
          cssclass tab/cssclass | string:;
          klass python: (active and 'tab-active') or '';
          "
          tal:attributes="class string:$klass $cssclass"
          >
          <a href=""
            tal:attributes="href string:${root_url}/${tab/path}"
            >
            <div>
              <span class="tab-title" tal:content="structure tab/title">
                Article X</span>
              <span class="tab-subtitle" tal:content="structure tab/subtitle">
                Subtitle here</span>
            </div>
          </a>
        </li>
      </tal:rep>
    </ul>
    <!-- <div class="visible-xs" style="clear: both;"> -->
    <div class="article-select">
      <div tal:content="view/tab_select_label | string:Select ${tab_type}:">
        Select article/tab:
      </div>
      <select class="notselect" id="mobile-select-article">
        <tal:rep tal:repeat="tab view/main_forms">
          <tal:block tal:define="
            section view/section | nothing;
            active python: section and (view.section == tab.section) or (not section and (view.name in request.URL0))">
            <option tal:attributes="value string:./${tab/path}; data-maintitle tab/title;
              data-subtitle tab/subtitle;
              selected python: active and 'selected'">
              <span tal:replace="tab/title"></span> <span tal:replace="tab/subtitle"></span>
            </option>
          </tal:block>
        </tal:rep>
      </select>
    </div>
  </div>
</metal:macro>

<metal:macro define-macro="top-maintab">
  <div id="mainform-tabs">
    <div class="topnav toptab-nav">
      <div class="toptab-item toptab-start">
          <a href=""
             tal:attributes="href string:${context/absolute_url}/msfd-start">
             <img src="++resource++msfd/images/msfd_1.png"/>
             <h4 class="toptab-title">About</h4>
          </a>
      </div>
        <div class="toptab-item active">
          <div>
            <h4 class="toptab-title" tal:content="structure view/main_title">
              Article X</h4>
            <div class="toptab-subtitle" tal:content="structure view/subtitle">
              Subtitle here</div>
          </div>
        </div>
    </div>
  </div>
</metal:macro>

<metal:macro define-macro="articles-select">
  <!-- <div class="visible-xs" style="clear: both;"> -->
  <div class="article-select" tal:define="tab_type view/tabs_type | string:article">
    <label tal:content="view/tab_select_label | string:Select ${tab_type}:">
      Select article/tab:
    </label>
    <select class="notselect" id="mobile-select-article">
      <tal:rep tal:repeat="tab view/main_forms">
        <tal:block tal:define="
          section view/section | nothing;
          active python: section and (view.section == tab.section) or (not section and (view.name in request.URL0))">
          <option tal:attributes="value string:./${tab/path}; data-maintitle tab/title;
            data-subtitle tab/subtitle;
            selected python: active and 'selected'">
            <span tal:replace="tab/title"></span> <span tal:replace="tab/subtitle"></span>
          </option>
        </tal:block>
      </tal:rep>
    </select>
  </div>
</metal:macro>

<metal:macro define-macro="form-collapse">
  <tal:def define="dataTarget string: .${formid}-collapse">
    <div data-toggle='collapse' tal:attributes="data-target dataTarget">
      <div metal:define-slot="header" tal:content="dataTarget">
      </div>
    </div>
    <div tal:attributes="class string: ${formid}-collapse">
      <div metal:define-slot="content">
      </div>
    </div>
  </tal:def>
</metal:macro>


<metal:macro define-macro="simplify-table">
  <div class="simplify-form" tal:condition="data">

    <button type="button" class="btn btn-sm btn-toggle active"
      data-toggle="button" aria-pressed="true" autocomplete="off">
      <div class="handle"></div>
    </button>
    <label>Simplified table</label>

  </div>
</metal:macro>

<metal:macro define-macro="overflow-table">
  <div class="overflow-table">
    <div class="inner">
      <table tal:condition="data"
        class="table table-bordered table-striped table-report">
        <tal:rep tal:repeat="row data" >
          <tal:row replace="structure row"></tal:row>
        </tal:rep>
      </table>
    </div>
  </div>
</metal:macro>
