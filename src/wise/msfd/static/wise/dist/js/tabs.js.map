{"version":3,"file":"tabs.js","sources":["../../src/js/tabs.js"],"sourcesContent":["/* global setupTabs, clickFirstTab */\n\nfunction clickFirstTab() {\n  //$(\"#mainform-tabs ul li:first-child a\").trigger('click');\n  $('#tabs-wrapper ul li:first-child a').trigger('click');\n  $('.tabs-wrapper ul li:first-child a').trigger('click');\n}\n\nwindow.setupTabs = function (tabswrapper) {\n  function setupInnerTabs(tabsW) {\n    var t = $('ul.nav:not(.topnav) > li');\n    // tabs width calculation\n    var nrtabs = t.length;\n    if (nrtabs > 1) {\n      var tabLength = nrtabs === 2 ? 35 : Math.floor((100 - nrtabs) / nrtabs);\n\n      t.css('width', tabLength + '%');\n      var rest = 100 - tabLength * nrtabs;\n\n      var totalL = $('ul.nav').width();\n      var mrR = Math.floor(totalL / 100);\n\n      $(t).css({\n        'margin-left': 0,\n        'margin-right': mrR / 2 + 'px',\n      });\n    } else {\n      $(t).css({ 'margin-left': 0 });\n    }\n\n    /*$.each( $( \".tabs-wrapper\") , function (indx, item) {\n            if($(item).find(\"ul\").length ===  0){ return true;}\n            //if($(item).find(\"ul li\").length === 0) $(\".tabs-wrapper\").hide();\n        });*/\n  }\n\n  function setupTopTabs(tabswrapper) {\n    var tabsWrapper = tabswrapper || '#mainform-tabs';\n\n    /* david commented\n        if ($(\"#tabs-wrapper ul\").find(\"li\").length === 0){\n            if( $(\"#tabs-wrapper\").find(\"ul\").length ===  0 ){ //return true;\n            }\n            //if($(\"#tabs-wrapper\").find(\"ul li\").length === 0) $(\"#tabs-wrapper\").hide();\n        } */\n\n    var renderTopTabs = function () {\n      var nrTabs = $(tabsWrapper + ' ul.topnav li').length || 0;\n\n      if (nrTabs === 0) {\n        return false;\n      }\n\n      var PERCENT = false;\n\n      if (PERCENT) {\n        var totalLength = 100;\n        var tabSpaces = nrTabs - 1;\n        var tabWidth = (totalLength - tabSpaces) / nrTabs;\n        var rest = totalLength - tabWidth * nrTabs;\n        var tabSpace = rest / (nrTabs - 1);\n        /*$( \".topnav li\").css({\n                    \"width\": tabWidth  + \"%\",\n                    \"margin-right\": tabSpace + \"%\"\n                });\n                $( \".topnav li:last-child\").css({\n                   \"margin-right\" : \"0\"\n                });*/\n      } else {\n        var totalLength = $(tabsWrapper + ' ul.topnav').outerWidth();\n        var tabSpaceWidth = 10;\n        var tabSpaces = (nrTabs - 1) * tabSpaceWidth;\n        var tabWidth = (totalLength - tabSpaces) / nrTabs;\n        var rest = totalLength - tabWidth * nrTabs;\n        var tabSpace = rest / (nrTabs - 1);\n\n        $('.topnav li').css({\n          width: tabWidth + 'px',\n          'margin-right': tabSpace + 'px',\n        });\n        $('.topnav li:last-child').css({\n          'margin-right': '0',\n        });\n        $('.topnav li.manage-users').css({\n          width: 'initial',\n        });\n      }\n    };\n\n    if ($(tabsWrapper + ' ul li').length === 1) {\n      $('#tabContents').removeClass('tab-content');\n      $(tabsWrapper + ' ul').attr('class', '');\n      $(tabsWrapper + ' ul li').css({\n        'background-color': 'transparent',\n        float: 'none',\n      });\n      var lt = $(tabsWrapper + ' ul li a').text();\n      $(tabsWrapper + ' ul li').append('<h4>' + lt + '</h4>');\n      $(tabsWrapper + ' ul li a').remove();\n      $(tabsWrapper + ' .tab-pane').removeClass('fade');\n    }\n    renderTopTabs();\n  }\n\n  // Krisz: disabled, TODO: make sure if we really need it\n  // we can use flex to set equal width & height for tab items\n  // setupTopTabs(tabswrapper);\n  // setupInnerTabs(tabswrapper);\n\n  clickFirstTab();\n};\n\njQuery(document).ready(function ($) {\n  if ('undefined' !== typeof window.setupTabs) {\n    window.setupTabs();\n  }\n\n  // var w = \"auto\";\n  // var daw = true;\n  //\n  // function formatArticle (article) {\n  //   var el = $(article.element[0]);\n  //   var subtitle = el.attr(\"data-subtitle\");\n  //\n  //   return '<span style=\"font-weight: bold;\">' +\n  //             el.attr(\"data-maintitle\") + ': ' +\n  //           '</span>' +\n  //           '<span>'+ subtitle +'</span>';\n  // }\n  //\n  // function marineUnitSelect(w,daw) {\n  //   var $selectArticle = $(\"#mobile-select-article\");\n  //\n  //   w = false;\n  //   daw = false;\n  //   var moptions = {\n  //     placeholder: 'Select an option',\n  //     closeOnSelect: true,\n  //     dropdownAutoWidth: daw,\n  //     width: w,\n  //     theme: \"flat\",\n  //     minimumResultsForSearch: 20,\n  //     formatSelection: formatArticle,\n  //     formatResult: formatArticle,\n  //     containerCssClass: \"mobile-select-article\"\n  //   };\n  //\n  //   if ($.fn.select2 !== undefined) {\n  //     $selectArticle.select2(moptions);\n  //     $selectArticle.one(\"select2-selecting\", function (ev) {\n  //       document.location.href = ev.choice.id;\n  //     });\n  //   }\n  // }\n\n  // marineUnitSelect(w,daw);\n\n  $(window).on('resize', function () {\n    // marineUnitSelect(w,daw);\n    if ('undefined' !== typeof window.setupTabs) {\n      window.setupTabs();\n    }\n  });\n});\n"],"names":["clickFirstTab","$","trigger","window","setupTabs","tabswrapper","jQuery","document","ready","on"],"mappings":"AAEA,SAASA,gBAEPC,EAAE,qCAAqCC,QAAQ,SAC/CD,EAAE,qCAAqCC,QAAQ,SAGjDC,OAAOC,UAAY,SAAUC,GAqG3BL,iBAGFM,OAAOC,UAAUC,MAAM,SAAUP,QAC3B,IAAuBE,OAAOC,WAChCD,OAAOC,YA2CTH,EAAEE,QAAQM,GAAG,SAAU,gBAEjB,IAAuBN,OAAOC,WAChCD,OAAOC"}