Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]}),function(u,b,g){function v(){var t=g(".overflow-table"),o=g(u);t.each(function(){var e=g(this),t=e,s=g(".top-scroll",t),i=s.find(".top-scroll-inner"),a=g(".inner",t),n=g(".table-report",t).outerWidth(includeMargin=!0),l=n+g("th",t).width(),r=g(".scroll-wrapper",t);i.width(n),s.on("scroll",function(){a.scrollLeft(g(this).scrollLeft())}),a.on("scroll",function(){s.scrollLeft(g(this).scrollLeft())}),l>e.width()&&o.on("resize scroll",function(){var t=o.scrollTop();e.isInViewport()?r.addClass("fixed-scroll"):r.removeClass("fixed-scroll"),t>=e.offset().top+e.outerHeight()-u.innerHeight?r.hide():r.show()})})}g.fn.fixTableHeaderAndCellsHeight=function(){this.each(function(){g("th",this).each(function(t){var e,s,i,a,n,l,r;g(this).parents("table").hasClass("skip-height-fix")||(a=g(this).parents(".overflow-table").hasClass("side-by-side-table-left"),g(this).parents(".overflow-table").hasClass("side-by-side-table-right")||(s=(e=g(this)).parent().children('td:not(".sub-header")'),a&&(a=g(g(this).parents(".overflow-table.side-by-side-table").siblings(".overflow-table.side-by-side-table-right").find("tr")[t]).children(),s=g.merge(s,a)),t=g("td.sub-header",e.parent()),i=[],s.each(function(){var t,e=g(this);e.hasClass("translatable")?(t=e.find(".tr-text").height(),i.push(t)):i.push(e.height())}),a=Math.max.apply(Math,i),n=Math.max(e.height(),t.height(),a),e.height(n),t.height(n),l=e.height(),r=e.innerHeight(),a<=l&&s.each(function(){g(this).hasClass("translatable")?g(this).height(r):g(this).height(l)}),g("div",this).css("margin-top","-4px")))})})},g.fn.fixTableHeaderHeight=function(){this.each(function(){g(this).parents("table").hasClass("skip-height-fix")||g("th",this).each(function(t){var e,s,i=g(this),a=g("td",i.parent()),n=[],l=g(this).parents(".overflow-table").hasClass("side-by-side-table-left");g(this).parents(".overflow-table").hasClass("side-by-side-table-right")||l||(l&&(e=(t=g(g(this).parents(".overflow-table.side-by-side-table").siblings(".overflow-table.side-by-side-table-right").find("tr")[t])).children("td"),s=t.children("th"),a=g.merge(a,e)),a.each(function(){var t,e=g(this);e.hasClass("translatable")?(t=e.find(".tr-text").height(),n.push(t)):n.push(e.height())}),t=Math.max.apply(Math,n),i.height(t),l&&s.height(t))})})},g.fn.simplifyTable=function(){var t=g(this),i=(t.data("original")||t.data("original",t.html()),{curentLevel:0,setlimits:[{level:-1,limits:[]}]});g("tr",this).each(function(){var t,a,e,n,s,l;a=i,e=[],n=[],s=null!=(s=g(t=this).data("level"))?parseInt(s):-1,g(a.setlimits).each(function(){if(this.level==s)return n=this.limits,!1}),0==n.length&&(n=a.setlimits[a.setlimits.length-1].limits),g("td",t).not(".sub-header").each(function(t){0!=e.length&&!n.includes(t)&&g(this).text().trim()==g(e.last().last()).text().trim()?e.last().push(this):e.push([this])}),g(e).each(function(){var t;1<this.length&&(t=this.length,g(this[0]).attr("colspan",t),g(this.slice(1)).each(function(){g(this).remove()}))}),-1!=s&&(n=[],a.curentLevel=s,g(e).each(function(){var t=this.length;n.length&&(t+=n[n.length-1]),n.push(t)}),a.setlimits.push({level:a.curentLevel,limits:n.slice(0)})),l=0,g("td",t).not(".sub-header").each(function(t){var e,s=a.curentLevel,i=parseInt(g(this).attr("colspan")||"1");if(l+=i,n.includes(l)){if(0<s)for(e=0;e<a.setlimits.length;e++)if(a.setlimits[e].limits.includes(l)){s=a.setlimits[e].level;break}g(this).addClass("endgroup_"+s)}})}),t.data("simplified",t.html())},g.fn.toggleTable=function(t){var e=g(this).data("original"),s=g(this).data("simplified");t?g(this).html(s):(g(this).hide(),g(this).empty().html(e),g(this).show()),setupReadMoreModal(),setupTranslateClickHandlers(),g(this).fixTableHeaderAndCellsHeight()},u.setupReadMoreModal=function(){var t=g(".table-report"),s=g("#read-more-modal"),i=g(".modal-content-wrapper");t.find(".tr-text").each(function(){g(this).text();var t,e=g(this).html();397<e.length&&(g(this).addClass("short"),t=e.substr(0,297.75)+"...",g(this).html(t),g(this).on("click",function(){i.html(e),s.modal("show")}))}),g(".btn-close-modal").click(function(){i.empty()})},g.fn.isInViewport=function(){var t=g(this).offset().top,e=t+g(this).height(),s=g(u).scrollTop(),i=s+g(u).height();return s<e&&t<i},g.fn.setupFixedTableRows=function(){g(this).each(function(){var t=g(this),n=t.find(".fixed-table-wrapper"),l=(g("th",t.parent()),g(".table-report",t).width()),r=g(".inner",t),o=g(".fixed-table-inner",t);function h(t){function e(){r.scrollLeft(g(this).scrollLeft())}function s(){o.scrollLeft(g(this).scrollLeft())}t?(o.on("scroll",e),r.on("scroll",s)):(o.off("scroll",e),r.off("scroll",s))}h(!0),t.find(".fix-row").each(function(t){t="cb"+t++;g(this).val(t)}),t.find(".fix-row").change(function(){var s,t=g(this),e=t.val(),i=t.closest(".overflow-table").find(".fixed-table"),a=t.closest(".overflow-table").find(".fixed-table-wrapper");i.width(l),t.is(":checked")?(a.addClass("sticky-table"),t.closest(".report-section").siblings(".report-section").each(function(){($ftw=g(this).find(".fixed-table-wrapper")).find("button.reset-pins").click()}),t=t.closest("tr"),s=t.children("td"),(t=t.clone()).children("td").width(function(t,e){return s.eq(t).outerWidth()}),t.appendTo(i).attr("data-row",e)):(n.find('tr[data-row="'+e+'"]').slideUp("fast",function(){g(this).remove()}),1===i.find("tr").length&&a.removeClass("sticky-table")),n.find(".fix-row").change(function(){var t=g(this),e=t.val();0===t.closest("tr").siblings().length&&t.closest(".fixed-table-wrapper").removeClass("sticky-table"),t.closest("tr").remove(),g('.fix-row[value="'+e+'"]').prop("checked",!1)}),h(!1),o.scrollLeft(r.scrollLeft()),h(!0)})}),g(u).on("resize scroll",function(){0<g(".report-nav.sticky").length?g(".fixed-table-wrapper").each(function(){g(this).css("top","56px")}):g(".fixed-table-wrapper").each(function(){g(this).css("top","0")})})},g.fn.setupStickyRows=function(){($stickyTable=g(".table-sticky-first-col")).find("tr").each(function(){g(this).find("th.sticky-col").each(function(){$currentTh=g(this),($prevTh=g(this).prev(".sticky-col")).hasClass("sticky-col")?(prevWidth=$prevTh.outerWidth(),prevLeft=parseInt($prevTh.css("left")),$currentTh.css({left:prevWidth+prevLeft})):$currentTh.css("left",-1)})}),$fixedTable=g(this).find(".fixed-table"),g(this).find(".fixed-table-wrapper").addClass("sticky-table"),g(this).find(".inner table").hasClass("table-sticky-first-col")&&$fixedTable.addClass("table-sticky-first-col"),g(this).find("tr.sticky-row").each(function(){g(this).children().each(function(){var t=g(this).outerWidth();g(this).css("min-width",t),g(this).css("width",t),g(this).css("background-color",g(this).css("background-color")),g(this).css("color",g(this).css("color")),g(this).css("text-align",g(this).css("text-align"))}),(clone=g(this).clone()).appendTo($fixedTable)}),g(u).on("resize scroll",function(){g(".overflow-table").each(function(){var t=g(this),a=(t.find(".fixed-table-wrapper"),[]);t.find(".inner tr.sticky-row").each(function(){var t=g(this).offset().top,e=parseInt(g(u).scrollTop()),s=g(this).parents(".overflow-table"),s=s.offset().top+s.outerHeight(),i=g(this).parents("thead").outerHeight();isInViewport=e<t||s<e+i,a.push(isInViewport)}),a.includes(!1)?t.removeClass("hidden-fixed-table"):t.addClass("hidden-fixed-table")})})},g(b).ready(function(s){var d,a,e,t,n,l,r;function f(){g(".table-report").each(function(){g(this).fixTableHeaderAndCellsHeight()})}setupReadMoreModal(),g(".button-field").addClass("btn"),g(".toggle-sidebar").hide(),a=[],g((d||".wise-search-form-container")+" select").each(function(t,e){var s=g(e).attr("id");if(-1!==a.indexOf(s))return!1;g(e).addClass("js-example-basic-single");s={placeholder:"Select an option",closeOnSelect:!0,dropdownAutoWidth:!0,width:"100%",theme:"flat"};g(e).find("option").length<10&&(s.minimumResultsForSearch=1/0),g(e).select2(s)}),t=g("#report-data-navigation"),g("button",t).on("click",function(){return g(".nav-body",t).toggle(),g(this).children().addClass("glyphicon").toggleClass("glyphicon-menu-hamburger glyphicon-remove-circle"),!1}),g(".nav-body",t).hide(),n=g(".report-nav"),l=g(".report-title"),0<n.length&&(e=n.offset().top,g(u).scroll(function(){var t=g(u).scrollTop(),t=e<=t;n.toggleClass("sticky",t),l.toggleClass("fixed-title",t)})),g(u).resize(function(){clearTimeout(r),r=setTimeout(f,500)}),u.matchMedia("(max-width: 768px)").matches&&g(".overflow-table h5").width(g(".overflow-table table").width()),g('<div class="scroll-wrapper"><i class="glyphicon glyphicon-th"></i><div class="top-scroll"><div class="top-scroll-inner"></div></div></div>').insertAfter(g(".overflow-table").find(".inner")),g(".overflow-table").each(function(){var t=g(this).find("table"),e=g('<input type="checkbox" class="fix-row"/>'),s=g('<div class="fixed-table-wrapper"><button title="Clear filters" class="reset-pins"><i class="glyphicon glyphicon-remove-circle"></i></button><div class="fixed-table-inner"><table class="table table-bordered table-striped fixed-table"></table></div></div>');s.find("button.reset-pins").click(function(){($ftw=g(this).closest(".fixed-table-wrapper")).removeClass("sticky-table"),$ftw.find("tr").remove(),($innerTable=$ftw.siblings(".inner")).find("tr input").prop("checked",!1)}),(t.find("td.sub-header").length?t.find("td.sub-header"):t.find("th div")).append(e),s.insertBefore(g(this).find(".inner"))});var o=g(".first-header");if(0!==o.length){var h,p="",p=o[0].firstElementChild.innerText;for(i=1;i<o.length;i++)p===(h=o[i].firstElementChild.innerText)?(o[i].firstElementChild.innerText="",g(o[i-1]).css("border-bottom","0px")):p=h}s(".assessment-read-more").click(function(){var t=s(this);t.text(function(t,e){return e.startsWith("Show")?"Hide reports":s(this).attr("display-text")}),t.parents().siblings(".assessment-dd-list").fadeToggle(),t.parents().siblings(".text-reports-table").find(".assessment-dd-list").fadeToggle()});var c=s(".scroll-to-top");s(u).scroll(function(){400<s(this).scrollTop()?c.fadeIn():c.fadeOut()}),c.click(function(){return s("html, body").animate({scrollTop:0},400),!1}),s(u).on("load",function(){var e,t;g(".simplify-form").next().find(".table-report").each(function(){g(this).simplifyTable()}),g(".simplify-form button").on("click",function(){var t="true"==g(this).attr("aria-pressed");$p=g(this).parent().next(),g(".table-report",$p).toggleTable(!t),$p.setupFixedTableRows(),v()}),s(".overflow-table").each(function(){s(this).setupFixedTableRows(),s(this).find(".table-report").fixTableHeaderAndCellsHeight(),s(this).setupStickyRows()}),v(),t=g(".table-wrap"),g("#container-assessment-data-2018 .assessment-data-table").width()<=t.width()||(g("div.gescomp",t).css({display:"inline-table","min-width":"inherit",width:"inherit"}),e=0,g("div.gescomp",t).each(function(){var t=g(this).width();e<t&&(e=t)}),g("div.gescomp",t).css({width:e})),g(".assessment-status-processstate").each(function(){var t=g(this);t.find(".process-state");t.on("click",function(){t.toggleClass("active")})}),g(".assessment-status-wrapper .assessment-status.process-state select").change(function(){var t=g(this).parents("form"),e=g(".assessment-status-container2"),s=t[0].action;g(b.body).addClass("cursor-wait"),t.addClass("cursor-wait"),e.each(function(){g(this).addClass("cursor-wait")}),g.ajax({url:s,type:"POST",data:t.serialize(),success:function(){location.reload()}})}),g(".assessment-status-td.enable-process-state-change").each(function(){var t=g(this),e=t.find(".assessment-status-wrapper form").attr("action");g("<input type='checkbox' />").attr("name","process-state-change").attr("value",e).appendTo(t).change(function(){var t,e=g(this).attr("value");g(this).is(":checked")?(0===g("#form-process-state-change-bulk").find("input[value='"+e+"' ]").length&&g(this).clone().attr("type","hidden").appendTo("#form-process-state-change-bulk"),(t=g(this).parent("td").find(".phase-selector").clone().attr("id","process-state-bulk-select")).change(function(){var t=g(this).parents("form"),e=t[0].action;g(b.body).addClass("cursor-wait"),t.addClass("cursor-wait"),g.ajax({url:e,type:"POST",data:t.serialize(),success:function(){location.reload()}})}),g("#form-process-state-change-bulk .phase-selector").replaceWith(t)):(g("#form-process-state-change-bulk").find("input[value='"+e+"' ]").remove(),0===g("#form-process-state-change-bulk").find("input[name='process-state-change']").length&&g("#form-process-state-change-bulk .phase-selector select").remove())})})})})}(window,document,$);
//# sourceMappingURL=compliance.js.map