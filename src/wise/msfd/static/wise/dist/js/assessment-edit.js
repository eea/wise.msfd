!function(a){function b(b){var c=b.data("question-id"),d=b.data("thread-id"),e="./@@ast-comments?q="+c+"&thread_id="+d;a.get(e,function(a){b.html(a)})}function c(){a(window).on("resize scroll",function(){a(".subform .right .comments").each(function(){var c=a(this);"true"!==c.data("comments-loaded")&&c.isInViewport()&&(c.data("comments-loaded","true"),b(c))})})}function d(){a(".subform .right .textline button").on("click",function(){var b=a(this),c=a(".comments",b.closest(".right")),d=a("textarea",b.closest(".textline")),e=c.data("question-id"),f=c.data("thread-id"),g=d.val();if(!g)return!1;var h="./@@add_comment",i={text:g,q:e,thread_id:f};return a.post(h,i,function(a){c.html(a),d.val("")}),!1})}function e(){var b=a(".right.disc-tl"),c=a(".right.disc-ec"),d=b.length,e=c.length;d&&e&&c.addClass("inactive"),a(".right.discussion .comments").click(function(){$thisComm=a(this).closest(".right"),$thisComm.hasClass("inactive")&&($otherComm=$thisComm.siblings(".right"),$thisComm.toggleClass("inactive"),$otherComm.toggleClass("inactive"))})}function f(){a("#comp-national-descriptor div.subform.disabled div.left").find("select, textarea").each(function(){a(this).attr("disabled",!0)}),a(".kssattr-formname-edit-assessment-data-2018").submit(function(){a(":disabled").each(function(){a(this).removeAttr("disabled")})})}function g(){a("#comp-national-descriptor div.subform div.left div.assessment-form-input").find("option:contains('No value'), span.select2-chosen:contains('No value')").each(function(){a(this).text("-")})}function h(){var b=!1,c=!1,d=a("#comp-national-descriptor");a("#comp-national-descriptor form").submit(function(){b=!0}),d.on("change","input, textarea, select",function(a){c=!0}),a(window).bind("beforeunload",function(){if(c&&!b)return"You have unsaved changes. Do you want to leave this page?"});var e=d.find(".select2-container"),f=d.find("textarea");e.closest(".fields-container-row").addClass("flex-select"),f.closest(".fields-container-row").addClass("flex-textarea")}a.fn.isInViewport=function(){var b=a(this).offset().top,c=b+a(this).outerHeight(),d=a(window).scrollTop(),e=d+a(window).height();return c>d&&b<e},a(document).ready(function(){c(),d(),e(),f(),g(),h();var b=a(window),i=a(".subform");i.each(function(){var c=a(this),d=c.find(".right"),e=c.find(".left").innerHeight();d.innerHeight(e);var f;b.resize(function(){clearTimeout(f),f=setTimeout(function(){d=c.find(".right"),e=c.find(".left").innerHeight(),d.innerHeight(e)},100)})});var j,k,l=a(".form-right-side"),m=a(".report-nav"),n=0;l.offset()&&(n=l.offset().top),m.length>0&&(rnOffset=m.offset().top),k=b.height()-2*l.height(),l.find(".btn").addClass("btn-success"),b.scroll(function(){j=b.scrollTop();var a=j+k<n&&j>=rnOffset;l.toggleClass("fixed-save-btn",a)})})}(jQuery);
//# sourceMappingURL=assessment-edit.js.map