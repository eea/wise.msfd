<div tal:define="assessment options/assessment; score_2012 options/score_2012">
  <style>
    th.as-header {
    background-color: #999;
    color: white;
    }
    th.as-th-score {
    /* display: inline-block;
    width: 4em; */
    }
    td.as-score {
    text-align: right;
    }
    th.as-question {
      width: 22em !important;
      display: inline-block;
    }
    td.as-value {
      width: 30px;
      height: 30px;
    }
    th.as-ges-component {
      width: 30px;
    }
    td.as-value-0 {
      background-color: #DDD;
    }
    td.as-value-1 {
      background-color: #9bbb59;
    }
    td.as-value-2 {
      background-color: #d6e3bc;
    }
    td.as-value-3 {
      background-color: #ff99cc;
    }
    td.as-value-4 {
      background-color: #ff3399;
    }
    td.as-value-5 {
      background-color: #ffffff;
    }
  </style>

  <table class="table table-condensed assessment-data-table">
    <tbody>
      <tr>
        <th class="as-question as-header">Question / GESComponent</th>
        <th tal:repeat="g assessment/gescomponents" class="as-ges-component as-header">
          <span tal:replace="g">D0C0</span>
        </th>
        <!-- TODO: add "conclusion score" and "Weighting" as titles -->
        <th class='as-header'>Conclusion</th>
        <th class="as-th-score as-header">Score</th>
      </tr>
      <tal:rep tal:repeat="row assessment/answers">
        <tr>
          <th rowspan="2" tal:content="row/question">Question</th>
          <tal:rep tal:repeat="value row/values" >
            <td
              tal:attributes="class python: 'as-value as-value-{}'.format(value[1]);
              title python: value[0];"
              >
              <!-- -->
            </td>
          </tal:rep>

          <td
            tal:attributes="class python: 'as-value as-value-{}'.format(row.conclusion_color)"
            tal:content="row/conclusion">X</td>

          <td tal:attributes="class python: 'as-value as-value-{}'.format(5 - int(row.score))"
              tal:content="row/score">X</td>
        </tr>
        <tr>
          <td colspan="50" tal:content="row/summary">Summary</td>
        </tr>
      </tal:rep>
      <tr>
        <th rowspan="2">Assessment summary</th>
        <td
          rowspan="2"
          colspan="50"
          tal:attributes="colspan python: len(assessment.gescomponents)"
          tal:content="assessment/assessment_summary">Summary text</td>
        <th>Overall score (%)</th>
        <td tal:content="assessment/overall_score">123</td>
      </tr>

      <tr>
        <th>Overall conclusion: 2018</th>
        <td tal:content="assessment/overall_conclusion">124</td>
      </tr>

      <tr>
        <th rowspan="1">Recommendations</th>
        <td colspan="50"
          tal:attributes="colspan python: len(assessment.gescomponents)"
          tal:content="assessment/recommendations">Recomendation text</td>
        <th>Change since 2012</th>
        <td tal:content="python: assessment.overall_score - score_2012">+1</td>
      </tr>
    </tbody>
  </table>
</div>
