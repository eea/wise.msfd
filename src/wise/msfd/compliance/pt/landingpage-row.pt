<tal:rep tal:repeat="year_row options/data">
  <tal:def tal:define="date python: year_row.date;
        who python: year_row.who;
        article python: year_row.article;
        task python: year_row.task;
        css_extra python: year_row.css_extra;
        subrows python: year_row.subrows;">
    <tr tal:condition="python: len(subrows) > 0"
        tal:attributes="class python: css_extra"
        tal:define="rowspan python: len(subrows)">
      <th style="min-width: 35px" class="sticky-col" tal:attributes="rowspan rowspan" tal:content="date"></th>
      <th style="min-width: 35px" class="sticky-col" tal:attributes="rowspan rowspan" tal:content="who"></th>
      <th style="min-width: 40px" class="sticky-col" tal:attributes="rowspan rowspan" tal:content="article"></th>
      <th style="min-width: 120px" class="sticky-col bold-border" tal:attributes="rowspan rowspan" tal:content="task"></th>
      <tal:rep tal:repeat="item python: subrows[0]">
        <td tal:condition="python: item.rowspan > 0"
            tal:attributes="colspan python: item.colspan; class python: item.css_class;
                            rowspan python: item.rowspan">

          <tal:cond tal:condition="python: hasattr(item.href, '__iter__')">
            <tal:rep tal:repeat="i item/href">
              <a tal:attributes="href python: i[0]"
                 tal:content="python: i[1]" target="_blank"/>
            </tal:rep>
          </tal:cond>

          <a tal:condition="python: item.href"
             tal:attributes="href python: item.href"
             tal:content="python: item.text" target="_blank"/>
          <i tal:condition="python: not(item.href)" style="color: #d9534f;">
            <span class="glyphicon glyphicon-remove" aria-hidden="true" title="Not found"></span>
          </i>

        </td>
      </tal:rep>
    </tr>
    <tal:cond tal:condition="python: len(subrows) > 1">
      <tr tal:attributes="class python: css_extra"
          tal:repeat="subrow python: subrows[1:]">
        <tal:rep tal:repeat="item subrow">
          <td tal:condition="python: item.rowspan > 0"
              tal:attributes="colspan python: item.colspan; class python: item.css_class;
                              rowspan python: item.rowspan">

            <a tal:condition="python: item.href"
               tal:attributes="href python: item.href"
               tal:content="python: item.text"
               target="_blank"/>
            <i tal:condition="python: not(item.href)" style="color: #d9534f;">
              <span class="glyphicon glyphicon-remove" aria-hidden="true" title="Not found"></span>
            </i>

          </td>
        </tal:rep>
      </tr>
    </tal:cond>
  </tal:def>
</tal:rep>
<tr class="year-separator"><td colspan="99"></td></tr>